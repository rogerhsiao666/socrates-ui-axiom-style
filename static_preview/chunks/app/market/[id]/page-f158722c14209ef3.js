(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[144],{328:function(e,t,a){Promise.resolve().then(a.bind(a,9637))},9637:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return MarketDetailPage}});var s=a(7437),r=a(2265),l=a(4033),i=a(3487),n=a(9508),o=a(1396),c=a.n(o);let MarketMaker=class MarketMaker{calculatePrices(e){let t=e.reduce((e,t)=>e+Math.exp(t/this.b),0);return e.map(e=>Math.exp(e/this.b)/t)}calculateCost(e,t,a){let s=[...e];s[t]+=a;let r=this.b*Math.log(e.reduce((e,t)=>e+Math.exp(t/this.b),0)),l=this.b*Math.log(s.reduce((e,t)=>e+Math.exp(t/this.b),0));return l-r}constructor(){this.b=100}};function MarketDetailPage(){var e;let t=(0,l.useParams)(),{t:a}=(0,i.useLanguage)(),{isConnected:o}=(0,n.useWallet)(),[d,m]=(0,r.useState)(null),[x,h]=(0,r.useState)([]),[u,g]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[b,v]=(0,r.useState)("buy"),[y,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)("ALL"),[k,C]=(0,r.useState)([]),[S,M]=(0,r.useState)(""),[D,T]=(0,r.useState)(null),[L,P]=(0,r.useState)(""),generateMockComments=()=>[{id:"1",user:"0x1234...5678",userAvatar:"/api/placeholder/32/32?text=U1",content:"Based on recent polling data, I think Trump has a strong chance. The economic indicators are favoring the incumbent.",timestamp:"2024-01-15T10:30:00Z",likes:12,replies:[{id:"1-1",user:"0x9876...5432",userAvatar:"/api/placeholder/32/32?text=U2",content:"I disagree. The polling methodology has been questionable lately.",timestamp:"2024-01-15T10:35:00Z",likes:5,replies:[],parentId:"1"}]},{id:"2",user:"0xabcd...efgh",userAvatar:"/api/placeholder/32/32?text=U3",content:"This market is way too volatile. I'm staying on the sidelines until we get closer to the election.",timestamp:"2024-01-15T09:45:00Z",likes:8,replies:[]},{id:"3",user:"0xdef0...1234",userAvatar:"/api/placeholder/32/32?text=U4",content:'The "Other Candidate" option seems undervalued. There could be a surprise third-party candidate.',timestamp:"2024-01-15T08:20:00Z",likes:15,replies:[{id:"3-1",user:"0x5678...9abc",userAvatar:"/api/placeholder/32/32?text=U5",content:"Historically, third-party candidates rarely win. It's a long shot.",timestamp:"2024-01-15T08:25:00Z",likes:3,replies:[],parentId:"3"},{id:"3-2",user:"0x2468...ace0",userAvatar:"/api/placeholder/32/32?text=U6",content:"True, but the odds are still attractive for a small bet.",timestamp:"2024-01-15T08:30:00Z",likes:7,replies:[],parentId:"3"}]}];(0,r.useMemo)(()=>new MarketMaker,[]);let generatePriceHistory=(e,t)=>{let a,s,r;let l=[],i=new Date;switch(t){case"1H":a=60,s=6e4;break;case"6H":a=72,s=3e5;break;case"1D":a=96,s=9e5;break;case"1W":default:a=168,s=36e5;break;case"1M":a=120,s=216e5}r=e.price-(.15*Math.random()-.075);for(let t=a;t>=0;t--){let n=new Date(i.getTime()-t*s),o=(a-t)/a,c=1+(.08*Math.random()-.04),d=r+(e.price-r)*o,m=Math.max(.01,Math.min(.99,d*c));l.push({time:n.toISOString(),price:m,percentage:100*m})}return l},getOptionColor=e=>{let t=["#ef4444","#f59e0b","#3b82f6","#10b981","#8b5cf6"];return t[e%t.length]},A=(0,r.useMemo)(()=>{if(!d)return{};let e={};return d.options.forEach(t=>{e[t.id]=generatePriceHistory(t,N)}),e},[d,N]),generateOrderBookData=e=>{var t,a;let s=e.price,r=[];for(let e=0;e<8;e++){let t=s-.01-.005*e,a=Math.floor(5e4*Math.random())+5e3,l=t*a;r.push({price:Math.max(.01,t),shares:a,total:l})}let l=[];for(let e=0;e<8;e++){let t=s+.01+.005*e,a=Math.floor(5e4*Math.random())+5e3,r=t*a;l.push({price:Math.min(.99,t),shares:a,total:r})}return{bids:r,asks:l,spread:(null===(t=l[0])||void 0===t?void 0:t.price)-(null===(a=r[0])||void 0===a?void 0:a.price)||0}},W=(0,r.useMemo)(()=>{if(!d||!u)return null;let e=d.options.find(e=>e.id===u);return e?generateOrderBookData(e):null},[d,u]);(0,r.useEffect)(()=>{(()=>{let e={id:t.id,title:"Who will win the 2024 US Presidential Election?",description:"This market will resolve to the candidate who wins the 2024 United States Presidential Election. The market will resolve based on the official results certified by the Electoral College.",status:"trading",endTime:"2024-11-05T23:59:59Z",totalVolume:1542e4,totalValue:895e4,participants:28394,category:"Politics",imageUrl:"/api/placeholder/600/300?text=2024+Election",options:[{id:"trump",label:"Donald Trump",price:.45,volume:65e5,userPosition:0,priceChange:-2.1,color:"#FF3D5A"},{id:"biden",label:"Joe Biden",price:.42,volume:58e5,userPosition:0,priceChange:1.8,color:"#4285F4"},{id:"other",label:"Other Candidate",price:.13,volume:312e4,userPosition:0,priceChange:.3,color:"#9CA3AF"}]};m(e),h([{id:"1",user:"0x1234...5678",option:"Donald Trump",type:"buy",amount:1e3,price:.45,timestamp:"2024-01-15T10:30:00Z"},{id:"2",user:"0x9876...5432",option:"Joe Biden",type:"sell",amount:500,price:.42,timestamp:"2024-01-15T10:25:00Z"},{id:"3",user:"0xabcd...efgh",option:"Other Candidate",type:"buy",amount:200,price:.13,timestamp:"2024-01-15T10:20:00Z"}]),C(generateMockComments()),g(e.options[0].id),j(!1)})()},[t.id]);let handleSubmitReply=e=>{if(!L.trim())return;let t={id:Date.now().toString(),user:"0x"+Math.random().toString(16).substr(2,8)+"..."+Math.random().toString(16).substr(2,4),userAvatar:"/api/placeholder/32/32?text=U".concat(Math.floor(10*Math.random())),content:L,timestamp:new Date().toISOString(),likes:0,replies:[],parentId:e};C(a=>a.map(a=>a.id===e?{...a,replies:[...a.replies,t]}:a)),P(""),T(null)},handleLikeComment=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;t&&a?C(t=>t.map(t=>t.id===a?{...t,replies:t.replies.map(t=>t.id===e?{...t,likes:t.likes+1}:t)}:t)):C(t=>t.map(t=>t.id===e?{...t,likes:t.likes+1}:t))},formatTimeAgo=e=>{let t=new Date,a=new Date(e),s=Math.floor((t.getTime()-a.getTime())/6e4);return s<1?"just now":s<60?"".concat(s,"m ago"):s<1440?"".concat(Math.floor(s/60),"h ago"):"".concat(Math.floor(s/1440),"d ago")},E=(0,r.useMemo)(()=>{if(!d)return"";let e=new Date().getTime(),t=new Date(d.endTime).getTime(),a=t-e;return a<=0?"Ended":"".concat(Math.floor(a/864e5),"d ").concat(Math.floor(a%864e5/36e5),"h ").concat(Math.floor(a%36e5/6e4),"m")},[d]);return y?(0,s.jsx)("div",{className:"min-h-screen bg-background text-primary p-6",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,s.jsx)("div",{className:"h-8 bg-secondary rounded w-1/3"}),(0,s.jsx)("div",{className:"h-64 bg-secondary rounded"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:"h-48 bg-secondary rounded"},e))})]})})}):d?(0,s.jsxs)("div",{className:"min-h-screen bg-background text-primary",children:[(0,s.jsx)("div",{className:"border-b border-secondary",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4 mb-6",children:(0,s.jsxs)(c(),{href:"/",className:"flex items-center space-x-2 text-secondary hover:text-primary transition-colors",children:[(0,s.jsx)("span",{className:"text-lg",children:"←"}),(0,s.jsx)("span",{children:"Back to Markets"})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-800/50 text-gray-300 text-xs rounded border border-gray-700/50",children:d.category}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("trading"===d.status?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-gray-500/20 text-gray-400 border border-gray-500/30"),children:"trading"===d.status?"Trading":"closed"===d.status?"Closed":"Resolved"})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:d.title}),(0,s.jsx)("p",{className:"text-secondary text-lg leading-relaxed",children:d.description})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm",children:"⏰"}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"Time Remaining"})]}),(0,s.jsx)("div",{className:"text-xl font-bold text-white",children:E})]}),(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"\uD83D\uDCB0 Total Volume"}),(0,s.jsxs)("span",{className:"font-medium text-white",children:["$",d.totalVolume.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"\uD83D\uDCB5 Total Value"}),(0,s.jsxs)("span",{className:"font-medium text-white",children:["$",d.totalValue.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-400",children:"\uD83D\uDC65 Participants"}),(0,s.jsx)("span",{className:"font-medium text-white",children:d.participants.toLocaleString()})]})]})]})]})]})}),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Price History"}),(0,s.jsx)("div",{className:"flex space-x-1 bg-gray-800/50 rounded-lg p-1",children:["1H","6H","1D","1W","1M","ALL"].map(e=>(0,s.jsx)("button",{onClick:()=>w(e),className:"px-3 py-1 text-xs rounded transition-colors ".concat(N===e?"bg-blue-500 text-white":"text-gray-400 hover:text-white"),children:e},e))})]}),(0,s.jsxs)("div",{className:"relative h-80 mb-4",children:[(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 800 300",children:[(0,s.jsx)("defs",{children:(0,s.jsx)("pattern",{id:"grid",width:"40",height:"30",patternUnits:"userSpaceOnUse",children:(0,s.jsx)("path",{d:"M 40 0 L 0 0 0 30",fill:"none",stroke:"#374151",strokeWidth:"0.5",opacity:"0.3"})})}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),[25,20,15,10,5].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("line",{x1:"0",y1:60*t,x2:"800",y2:60*t,stroke:"#374151",strokeWidth:"0.5",opacity:"0.3"}),(0,s.jsxs)("text",{x:"10",y:60*t+5,fill:"#9CA3AF",fontSize:"12",children:[e,"%"]})]},e)),d&&d.options.map((e,t)=>{let a=A[e.id]||[];if(0===a.length)return null;let r=getOptionColor(t),l=a.map((e,t)=>{let s=t/Math.max(a.length-1,1)*780+10,r=Math.max(10,Math.min(290,300-e.percentage/25*300));return"".concat(0===t?"M":"L"," ").concat(s," ").concat(r)}).join(" ");return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:l,fill:"none",stroke:r,strokeWidth:"2",opacity:"0.8"}),(0,s.jsx)("path",{d:l+" L 790 300 L 10 300 Z",fill:r,opacity:"0.1"})]},e.id)}),d&&d.options.map((e,t)=>{let a=A[e.id]||[];if(0===a.length)return null;let r=getOptionColor(t),l=a[a.length-1],i=Math.max(10,Math.min(290,300-l.percentage/25*300));return(0,s.jsxs)("g",{children:[(0,s.jsx)("circle",{cx:790,cy:i,r:"4",fill:r,stroke:"white",strokeWidth:"2"}),(0,s.jsxs)("text",{x:760,y:i-8,fontSize:"11",fill:r,className:"font-medium",textAnchor:"middle",children:[l.percentage.toFixed(1),"%"]})]},"".concat(e.id,"-dot"))})]}),(0,s.jsx)("div",{className:"flex justify-between text-xs text-gray-400 mt-2 px-2",children:(()=>{let e=new Date,t=[];switch(N){case"1H":for(let a=5;a>=0;a--){let s=new Date(e.getTime()-6e5*a);t.push(s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))}break;case"6H":for(let a=5;a>=0;a--){let s=new Date(e.getTime()-36e5*a);t.push(s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))}break;case"1D":for(let a=5;a>=0;a--){let s=new Date(e.getTime()-144e5*a);t.push(s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))}break;case"1W":for(let a=6;a>=0;a--){let s=new Date(e.getTime()-864e5*a);t.push(s.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}break;case"1M":for(let a=5;a>=0;a--){let s=new Date(e.getTime()-5184e5*a);t.push(s.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}break;default:for(let a=6;a>=0;a--){let s=new Date(e.getTime()-864e5*a);t.push(s.toLocaleDateString("en-US",{month:"short",day:"numeric"}))}}return t})().map((e,t)=>(0,s.jsx)("span",{children:e},t))})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-4",children:d&&d.options.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:getOptionColor(t)}}),(0,s.jsx)("span",{className:"text-sm text-gray-300",children:e.label}),(0,s.jsxs)("span",{className:"text-sm font-medium text-white",children:[(100*e.price).toFixed(1),"%"]}),(0,s.jsxs)("span",{className:"text-xs ".concat(e.priceChange>=0?"text-green-500":"text-red-500"),children:[e.priceChange>=0?"+":"",e.priceChange.toFixed(1),"%"]})]},e.id))})]}),u&&W&&(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Order Book"}),(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:["Spread: ",(100*W.spread).toFixed(2),"%"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-xs text-gray-400 font-medium border-b border-gray-700 pb-2",children:[(0,s.jsx)("div",{className:"text-center",children:"PRICE"}),(0,s.jsx)("div",{className:"text-center",children:"SHARES"}),(0,s.jsx)("div",{className:"text-center",children:"TOTAL"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs text-red-400 font-medium mb-2",children:"ASKS"}),W.asks.slice(0,5).reverse().map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm py-1 hover:bg-red-500/10 rounded transition-colors",children:[(0,s.jsxs)("div",{className:"text-red-400 font-medium text-center",children:[(100*e.price).toFixed(1),"\xa2"]}),(0,s.jsx)("div",{className:"text-gray-300 text-center",children:e.shares.toLocaleString()}),(0,s.jsxs)("div",{className:"text-gray-300 text-center",children:["$",e.total.toFixed(0)]})]},"ask-".concat(t)))]}),(0,s.jsxs)("div",{className:"border-y border-gray-600 py-2 my-2",children:[(0,s.jsx)("div",{className:"text-center text-lg font-bold text-white",children:d.options.find(e=>e.id===u)&&"".concat((100*d.options.find(e=>e.id===u).price).toFixed(1),"\xa2")}),(0,s.jsx)("div",{className:"text-center text-xs text-gray-400",children:"Last Price"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs text-green-400 font-medium mb-2",children:"BIDS"}),W.bids.slice(0,5).map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm py-1 hover:bg-green-500/10 rounded transition-colors",children:[(0,s.jsxs)("div",{className:"text-green-400 font-medium text-center",children:[(100*e.price).toFixed(1),"\xa2"]}),(0,s.jsx)("div",{className:"text-gray-300 text-center",children:e.shares.toLocaleString()}),(0,s.jsxs)("div",{className:"text-gray-300 text-center",children:["$",e.total.toFixed(0)]})]},"bid-".concat(t)))]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-300",children:"Market Depth"}),(0,s.jsx)("div",{className:"relative h-80",children:(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 400 300",children:[(0,s.jsx)("defs",{children:(0,s.jsx)("pattern",{id:"depthGrid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:(0,s.jsx)("path",{d:"M 20 0 L 0 0 0 20",fill:"none",stroke:"#374151",strokeWidth:"0.5",opacity:"0.3"})})}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"url(#depthGrid)"}),[0,25,50,75,100].map((e,t)=>(0,s.jsxs)("g",{children:[(0,s.jsx)("line",{x1:"0",y1:60*t,x2:"400",y2:60*t,stroke:"#374151",strokeWidth:"0.5",opacity:"0.3"}),(0,s.jsxs)("text",{x:"5",y:60*t+5,fill:"#9CA3AF",fontSize:"10",children:[100-e,"%"]})]},e)),(()=>{let e=Math.max(...W.bids.map(e=>e.shares),...W.asks.map(e=>e.shares)),t=0,a=W.bids.slice(0,8).map((a,s)=>{t+=a.shares;let r=300-t/(4*e)*300;return"".concat(0===s?"M":"L"," ").concat(200-(s+1)*25," ").concat(Math.max(0,r))}).join(" ");return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:a+" L 0 300 L 200 300 Z",fill:"#10b981",opacity:"0.3"}),(0,s.jsx)("path",{d:a,stroke:"#10b981",strokeWidth:"2",fill:"none"})]})})(),(()=>{let e=Math.max(...W.bids.map(e=>e.shares),...W.asks.map(e=>e.shares)),t=0,a=W.asks.slice(0,8).map((a,s)=>{t+=a.shares;let r=300-t/(4*e)*300;return"".concat(0===s?"M":"L"," ").concat(200+(s+1)*25," ").concat(Math.max(0,r))}).join(" ");return(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:a+" L 400 300 L 200 300 Z",fill:"#ef4444",opacity:"0.3"}),(0,s.jsx)("path",{d:a,stroke:"#ef4444",strokeWidth:"2",fill:"none"})]})})(),(0,s.jsx)("line",{x1:"200",y1:"0",x2:"200",y2:"300",stroke:"#6b7280",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.7"}),(0,s.jsx)("text",{x:"205",y:"15",fill:"#9CA3AF",fontSize:"10",children:"Current Price"})]})}),(0,s.jsxs)("div",{className:"flex justify-center space-x-6 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,s.jsx)("span",{className:"text-gray-300",children:"Bids"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,s.jsx)("span",{className:"text-gray-300",children:"Asks"})]})]})]})]})]}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Market Options"}),(0,s.jsx)("div",{className:"grid gap-4",children:d.options.map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 cursor-pointer transition-all duration-200 hover:shadow-lg p-6 ".concat(u===e.id?"ring-2 ring-blue-500":""),onClick:()=>g(e.id),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:getOptionColor(t)}}),(0,s.jsx)("h3",{className:"text-xl font-semibold",children:e.label})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",e.price.toFixed(3)]}),(0,s.jsxs)("div",{className:"text-sm flex items-center ".concat(e.priceChange>=0?"text-green-500":"text-red-500"),children:[e.priceChange>=0?(0,s.jsx)("span",{className:"mr-1",children:"↗"}):(0,s.jsx)("span",{className:"mr-1",children:"↘"}),Math.abs(e.priceChange).toFixed(1),"%"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-400",children:"Volume"}),(0,s.jsxs)("div",{className:"font-medium text-white",children:["$",e.volume.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-400",children:"Your Position"}),(0,s.jsxs)("div",{className:"font-medium text-white",children:[e.userPosition.toFixed(2)," shares"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-gray-400",children:"Probability"}),(0,s.jsxs)("div",{className:"font-medium text-white",children:[(100*e.price).toFixed(1),"%"]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:"".concat(100*e.price,"%"),backgroundColor:getOptionColor(t)}})})})]},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Trade"}),o?(0,s.jsxs)("div",{className:"space-y-4",children:[u&&(0,s.jsxs)("div",{className:"p-3 bg-gray-800/50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm text-gray-400",children:"Selected Option"}),(0,s.jsx)("div",{className:"font-medium",children:null===(e=d.options.find(e=>e.id===u))||void 0===e?void 0:e.label})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>v("buy"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("buy"===b?"bg-green-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Buy"}),(0,s.jsx)("button",{onClick:()=>v("sell"),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors ".concat("sell"===b?"bg-red-500 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Sell"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Amount (USDC)"}),(0,s.jsx)("input",{type:"number",value:p,onChange:e=>f(e.target.value),placeholder:"Enter amount",className:"w-full p-3 bg-gray-800/50 border border-gray-700/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("button",{onClick:()=>{if(!d||!u||!p||!o)return;let e=parseFloat(p);if(isNaN(e)||e<=0)return;let t=d.options.findIndex(e=>e.id===u);if(-1===t)return;let a={...d},s=a.options[t];if("buy"===b){let r=e/s.price;s.userPosition+=r,s.volume+=e;let l=e/1e6;s.price=Math.min(.99,s.price+l);let i=a.options.filter((e,a)=>a!==t),n=1-s.price,o=i.reduce((e,t)=>e+t.price,0);i.forEach(e=>{e.price=e.price/o*n})}else{let r=Math.min(e/s.price,s.userPosition);s.userPosition-=r,s.volume+=r*s.price;let l=r*s.price/1e6;s.price=Math.max(.01,s.price-l);let i=a.options.filter((e,a)=>a!==t),n=1-s.price,o=i.reduce((e,t)=>e+t.price,0);i.forEach(e=>{e.price=e.price/o*n})}let r={id:Date.now().toString(),user:"0x"+Math.random().toString(16).substr(2,8)+"..."+Math.random().toString(16).substr(2,4),option:s.label,type:b,amount:e,price:s.price,timestamp:new Date().toISOString()};m(a),h([r,...x]),f("")},disabled:!u||!p,className:"w-full py-3 bg-green-500 hover:bg-green-600 disabled:bg-gray-600 text-white font-medium rounded-lg transition-colors",children:"buy"===b?"Buy Shares":"Sell Shares"})]}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("p",{className:"text-gray-400 mb-4",children:"Connect your wallet to trade"}),(0,s.jsx)("button",{className:"w-full py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors",children:"Connect Wallet"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Recent Transactions"}),(0,s.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:x.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm text-white",children:e.user}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["buy"===e.type?"Bought":"Sold"," ",e.option]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-medium text-sm ".concat("buy"===e.type?"text-green-500":"text-red-500"),children:["$",e.amount.toLocaleString()]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.timestamp).toLocaleTimeString()})]})]},e.id))})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-gray-900/90 backdrop-blur-sm rounded-xl border border-gray-800/50 p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Discussion"}),o?(0,s.jsx)("div",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-medium",children:"U"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("textarea",{value:S,onChange:e=>M(e.target.value),placeholder:"Share your thoughts on this market...",className:"w-full p-4 bg-gray-800/50 border border-gray-700/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:3}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-400",children:[S.length,"/500 characters"]}),(0,s.jsx)("button",{onClick:()=>{if(!S.trim())return;let e={id:Date.now().toString(),user:"0x"+Math.random().toString(16).substr(2,8)+"..."+Math.random().toString(16).substr(2,4),userAvatar:"/api/placeholder/32/32?text=U".concat(Math.floor(10*Math.random())),content:S,timestamp:new Date().toISOString(),likes:0,replies:[]};C(t=>[e,...t]),M("")},disabled:!S.trim(),className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white font-medium rounded-lg transition-colors",children:"Post Comment"})]})]})]})}):(0,s.jsxs)("div",{className:"mb-8 p-4 bg-gray-800/50 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-gray-400 mb-3",children:"Connect your wallet to join the discussion"}),(0,s.jsx)("button",{className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg transition-colors",children:"Connect Wallet"})]}),(0,s.jsx)("div",{className:"space-y-6",children:0===k.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 text-lg mb-2",children:"No comments yet"}),(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:"Be the first to share your thoughts!"})]}):k.map(e=>(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white font-medium text-sm",children:e.user.slice(2,4).toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"bg-gray-800/50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-medium text-white",children:e.user}),(0,s.jsx)("span",{className:"text-sm text-gray-400",children:formatTimeAgo(e.timestamp)})]})}),(0,s.jsx)("p",{className:"text-gray-200 leading-relaxed",children:e.content}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-3",children:[(0,s.jsxs)("button",{onClick:()=>handleLikeComment(e.id),className:"flex items-center space-x-1 text-gray-400 hover:text-red-400 transition-colors",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-sm",children:e.likes})]}),o&&(0,s.jsx)("button",{onClick:()=>T(D===e.id?null:e.id),className:"text-sm text-gray-400 hover:text-blue-400 transition-colors",children:"Reply"})]})]}),D===e.id&&(0,s.jsx)("div",{className:"mt-4 ml-4",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-medium text-xs",children:"U"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("textarea",{value:L,onChange:e=>P(e.target.value),placeholder:"Write a reply...",className:"w-full p-3 bg-gray-800/50 border border-gray-700/50 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:2}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{T(null),P("")},className:"px-4 py-1 text-sm text-gray-400 hover:text-white transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>handleSubmitReply(e.id),disabled:!L.trim(),className:"px-4 py-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-600 text-white text-sm font-medium rounded transition-colors",children:"Reply"})]})]})]})}),e.replies.length>0&&(0,s.jsx)("div",{className:"mt-4 ml-4 space-y-3",children:e.replies.map(t=>(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center text-white font-medium text-xs",children:t.user.slice(2,4).toUpperCase()}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"bg-gray-800/30 rounded-lg p-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,s.jsx)("span",{className:"font-medium text-white text-sm",children:t.user}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:formatTimeAgo(t.timestamp)})]}),(0,s.jsx)("p",{className:"text-gray-200 text-sm leading-relaxed",children:t.content}),(0,s.jsx)("div",{className:"flex items-center space-x-3 mt-2",children:(0,s.jsxs)("button",{onClick:()=>handleLikeComment(t.id,!0,e.id),className:"flex items-center space-x-1 text-gray-400 hover:text-red-400 transition-colors",children:[(0,s.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-xs",children:t.likes})]})})]})})]},t.id))})]})]})},e.id))})]})]})]}):(0,s.jsx)("div",{className:"min-h-screen bg-background text-primary p-6",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Market Not Found"}),(0,s.jsx)(c(),{href:"/",className:"text-blue-500 hover:underline",children:"Return to Markets"})]})})}},3487:function(e,t,a){"use strict";a.r(t),a.d(t,{LanguageProvider:function(){return LanguageProvider},useLanguage:function(){return useLanguage}});var s=a(7437),r=a(2265);let l={en:{"nav.createMarket":"Create Market","nav.myMarkets":"My Markets","nav.connectWallet":"Connect Wallet","nav.wallet.connected":"Connected","nav.wallet.address":"Address","nav.wallet.disconnect":"Disconnect","nav.wallet.connecting":"Connecting...","hero.title":"Trade on the Future with","hero.subtitle":"Decentralized prediction markets where you can bet on real-world events and earn rewards for accurate predictions.","stats.totalVolume":"Total Volume","stats.activeMarkets":"Active Markets","stats.traders":"Traders","nav.markets":"Markets","nav.live":"Live Stream","nav.video":"Video","nav.audio":"Audio","category.all":"All","category.news":"News","category.tech":"Tech","category.politics":"Politics","category.sports":"Sports","category.crypto":"Crypto","market.buyYes":"Buy YES","market.buyNo":"Buy NO","market.buy":"Buy","market.ends":"Ends","market.volume":"Volume","market.trading":"Trading","market.endingSoon":"Ending Soon","market.ended":"Ended","market.yesProb":"YES Probability","market.currentPrice":"Current Price","market.traders":"Traders","market.liquidity":"Liquidity","market.timeRemaining":"Time Remaining","market.connectWallet":"Connect wallet to trade","market.createdBy":"Created by","button.loadMore":"Load More Markets","button.confirm":"Confirm","button.cancel":"Cancel","button.hot":"Hot","search.placeholder":"Search markets...","search.noResults":"No prediction markets found","search.clearFilters":"Clear filters","modal.prediction.title":"Make Prediction","modal.prediction.amount":"Amount","modal.prediction.enterAmount":"Enter amount","modal.prediction.balance":"Balance","modal.prediction.fee":"Transaction Fee","modal.prediction.total":"Total","theme.light":"Light Mode","theme.dark":"Dark Mode","theme.toggle":"Toggle Theme","footer.description":"The future of decentralized prediction markets.","footer.markets":"Markets","footer.support":"Support","footer.community":"Community","footer.helpCenter":"Help Center","footer.documentation":"Documentation","footer.api":"API","footer.contact":"Contact","footer.copyright":"\xa9 2024 PredictMarket. All rights reserved.","tab.markets":"Markets","tab.following":"Following","tab.live":"Live","section.newCreated":"\uD83C\uDD95 Latest Created Topics","section.aboutToLaunch":"\uD83D\uDE80 About to Launch Topics","section.launched":"✅ Launched Topics","section.updateEvery10s":"Updates every 10s","section.updateEvery15s":"Updates every 15s","section.keepOriginal":"Keep original features","following.smartWallets":"\uD83E\uDDE0 Smart Wallet Leaderboard","following.myHistory":"\uD83D\uDCCA My Copy Trading History","following.wallet":"Wallet","following.1dPnl":"1D P&L","following.7dPnl":"7D P&L","following.30dPnl":"30D P&L","following.7dWinRate":"7D Win Rate","following.7dTrades":"7D Trades","following.followers":"Followers","following.balance":"Wallet Balance","following.actions":"Actions","following.follow":"Follow","following.unfollow":"Unfollow","following.copy":"Copy","following.online":"Online","following.offline":"Offline","live.hotStreams":"\uD83D\uDD25 Hot Live Streams","live.realTimeChat":"\uD83D\uDCAC Real-time Chat","live.viewers":"viewers","live.watching":"Watching","live.chatPlaceholder":"Type your message...","live.send":"Send"},zh:{"nav.createMarket":"创建市场","nav.myMarkets":"我的市场","nav.connectWallet":"连接钱包","nav.wallet.connected":"已连接","nav.wallet.address":"地址","nav.wallet.disconnect":"断开连接","nav.wallet.connecting":"连接中...","hero.title":"用 PredictMarket 交易未来","hero.subtitle":"去中心化预测市场，您可以对现实世界事件下注并因准确预测获得奖励。","stats.totalVolume":"总交易量","stats.activeMarkets":"活跃市场","stats.traders":"交易者","nav.markets":"市场","nav.live":"直播","nav.video":"视频","nav.audio":"音频","category.all":"全部","category.news":"新闻","category.tech":"科技","category.politics":"政治","category.sports":"体育","category.crypto":"加密货币","market.buyYes":"买入 YES","market.buyNo":"买入 NO","market.buy":"买入","market.ends":"结束时间","market.volume":"交易量","market.trading":"交易中","market.endingSoon":"即将结束","market.ended":"已结束","market.yesProb":"YES 概率","market.currentPrice":"当前价格","market.traders":"交易者","market.liquidity":"流动性","market.timeRemaining":"剩余时间","market.connectWallet":"连接钱包以交易","market.createdBy":"创建者","button.loadMore":"加载更多市场","button.confirm":"确认","button.cancel":"取消","button.hot":"热门","search.placeholder":"搜索市场...","search.noResults":"未找到预测市场","search.clearFilters":"清除过滤器","modal.prediction.title":"进行预测","modal.prediction.amount":"金额","modal.prediction.enterAmount":"输入金额","modal.prediction.balance":"余额","modal.prediction.fee":"交易费用","modal.prediction.total":"总计","theme.light":"浅色模式","theme.dark":"深色模式","theme.toggle":"切换主题","footer.description":"去中心化预测市场的未来。","footer.markets":"市场","footer.support":"支持","footer.community":"社区","footer.helpCenter":"帮助中心","footer.documentation":"文档","footer.api":"API","footer.contact":"联系我们","footer.copyright":"\xa9 2024 PredictMarket. 保留所有权利。","tab.markets":"市场","tab.following":"跟单","tab.live":"直播","section.newCreated":"\uD83C\uDD95 最新创建话题","section.aboutToLaunch":"\uD83D\uDE80 即将发射话题","section.launched":"已发射话题","section.updateEvery10s":"每10秒更新","section.updateEvery15s":"每15秒更新","section.keepOriginal":"保持原有功能","following.smartWallets":"\uD83E\uDDE0 聪明钱包排行榜","following.myHistory":"\uD83D\uDCCA 我的跟单历史","following.wallet":"钱包","following.1dPnl":"1D盈亏","following.7dPnl":"7D盈亏","following.30dPnl":"30D盈亏","following.7dWinRate":"7D胜率","following.7dTrades":"7D交易数","following.followers":"跟单人数","following.balance":"钱包余额","following.actions":"操作","following.follow":"跟单","following.unfollow":"取消跟单","following.copy":"复制","following.online":"在线","following.offline":"离线","live.hotStreams":"\uD83D\uDD25 热门直播","live.realTimeChat":"\uD83D\uDCAC 实时聊天","live.viewers":"观看者","live.watching":"正在观看","live.chatPlaceholder":"输入您的消息...","live.send":"发送"}},i=(0,r.createContext)(void 0),LanguageProvider=e=>{let{children:t}=e,[a,n]=(0,r.useState)("zh");return r.useEffect(()=>{let e=localStorage.getItem("language");e&&("en"===e||"zh"===e)&&n(e)},[]),r.useEffect(()=>{localStorage.setItem("language",a)},[a]),(0,s.jsx)(i.Provider,{value:{language:a,setLanguage:n,t:e=>l[a][e]||e},children:t})},useLanguage=()=>{let e=(0,r.useContext)(i);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},9508:function(e,t,a){"use strict";a.r(t),a.d(t,{WalletProvider:function(){return WalletProvider},useWallet:function(){return useWallet}});var s=a(7437),r=a(2265);let l=(0,r.createContext)(void 0),WalletProvider=e=>{let{children:t}=e,[a,i]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(1e3),[m,x]=(0,r.useState)(!1),connectWallet=async()=>{x(!0);try{await new Promise(e=>setTimeout(e,1500));let e="0x"+Math.random().toString(16).substr(2,40);o(e),i(!0),d(Math.floor(5e3*Math.random())+1e3),localStorage.setItem("wallet_connected","true"),localStorage.setItem("wallet_address",e)}catch(e){console.error("Failed to connect wallet:",e)}finally{x(!1)}};return(0,r.useEffect)(()=>{let e=localStorage.getItem("wallet_connected"),t=localStorage.getItem("wallet_address");"true"===e&&t&&(i(!0),o(t),d(Math.floor(5e3*Math.random())+1e3))},[]),(0,s.jsx)(l.Provider,{value:{isConnected:a,address:n,balance:c,connectWallet,disconnectWallet:()=>{i(!1),o(null),d(0),localStorage.removeItem("wallet_connected"),localStorage.removeItem("wallet_address")},isConnecting:m},children:t})},useWallet=()=>{let e=(0,r.useContext)(l);if(void 0===e)throw Error("useWallet must be used within a WalletProvider");return e}}},function(e){e.O(0,[569,971,472,744],function(){return e(e.s=328)}),_N_E=e.O()}]);